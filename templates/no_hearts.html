{% extends "base.html" %}
{% block title %}Out of Hearts ¬∑ Duolingo{% endblock %}
{% block content %}
<div class="no-hearts-container">
  <div class="no-hearts-icon">üíî</div>
  
  <h2>You're out of hearts!</h2>
  
  <p>
    Hearts are fully refilled for free every day. You can also practice earlier lessons or use gems to refill now.
  </p>

  <div class="hearts-refill-timer">
    <div style="font-size: 14px; margin-bottom: 8px; opacity: 0.8;">Hearts refill in</div>
    <div id="countdown" style="font-size: 32px;">
      <!-- Timer will be inserted here -->
    </div>
  </div>

  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px;">
    <div style="text-align: center; padding: 20px; background: white; border: 2px solid var(--duo-gray); border-radius: 12px;">
      <div style="font-size: 14px; color: var(--duo-text-light); margin-bottom: 8px; font-weight: 600;">
        PRACTICE TO EARN
      </div>
      <div style="font-size: 32px; margin-bottom: 4px;">‚ù§Ô∏è</div>
      <div style="font-size: 12px; color: var(--duo-text-light);">
        Complete practice lessons
      </div>
    </div>

    <div style="text-align: center; padding: 20px; background: white; border: 2px solid var(--duo-gray); border-radius: 12px;">
      <div style="font-size: 14px; color: var(--duo-text-light); margin-bottom: 8px; font-weight: 600;">
        REFILL NOW
      </div>
      <div style="font-size: 32px; margin-bottom: 4px;">üíé</div>
      <div style="font-size: 16px; font-weight: 700; color: var(--duo-text);">
        {% if profile.gems >= 350 %}
          350 gems
        {% else %}
          Not enough gems
        {% endif %}
      </div>
    </div>
  </div>

  <div style="display: flex; flex-direction: column; gap: 12px;">
    {% if profile.gems >= 350 %}
      <form method="post" action="#">
        {% csrf_token %}
        <button type="submit" class="btn" style="width: 100%;">
          REFILL HEARTS FOR 350 üíé
        </button>
      </form>
    {% endif %}

    <a href="{% url 'home' %}" class="btn btn-secondary" style="width: 100%;">
      PRACTICE TO EARN HEARTS
    </a>

    <a href="#" class="btn" style="width: 100%; background: var(--duo-blue); box-shadow: 0 4px 0 var(--duo-blue-dark);">
      TRY SUPER FOR UNLIMITED HEARTS
    </a>
  </div>

  <div style="margin-top: 32px; padding: 20px; background: #f0f9ff; border-radius: 12px; text-align: left;">
    <h4 style="font-size: 16px; margin-bottom: 12px; color: var(--duo-text);">
      üí° Tips to keep your hearts
    </h4>
    <ul style="color: var(--duo-text-light); font-size: 14px; line-height: 2; list-style: none; padding-left: 0;">
      <li>‚úì Take your time with each question</li>
      <li>‚úì Use hints when you're unsure</li>
      <li>‚úì Review lessons before moving on</li>
      <li>‚úì Upgrade to Super for unlimited hearts</li>
    </ul>
  </div>
</div>

<script>
  // Countdown timer to midnight
  function updateCountdown() {
    const now = new Date();
    const tomorrow = new Date(now);
    tomorrow.setDate(tomorrow.getDate() + 1);
    tomorrow.setHours(0, 0, 0, 0);
    
    const diff = tomorrow - now;
    
    const hours = Math.floor(diff / (1000 * 60 * 60));
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((diff % (1000 * 60)) / 1000);
    
    document.getElementById('countdown').textContent = 
      `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
  }
  
  updateCountdown();
  setInterval(updateCountdown, 1000);
</script>
{% endblock %}